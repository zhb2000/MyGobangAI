(function(e){function t(t){for(var i,n,o=t[0],u=t[1],c=t[2],l=0,f=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);h&&h(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,o=1;o<r.length;o++){var u=r[o];0!==s[u]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},s={app:0},a=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var h=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0034":function(e,t,r){e.exports=r.p+"img/board.5442f90f.jpg"},"034f":function(e,t,r){"use strict";var i=r("85ec"),s=r.n(i);s.a},"1a15":function(e,t,r){"use strict";var i=r("9851"),s=r.n(i);s.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("grid",{scopedSlots:e._u([{key:"board",fn:function(){return[r("game-boardObj",{ref:"board",attrs:{"ui-board":e.uiBoard,"just-chess":e.justChess,"mask-on":e.maskOn,playing:e.playing,"first-chess":e.firstChess},on:{"cell-click":e.handleClick}})]},proxy:!0},{key:"card",fn:function(){return[r("info-card",{directives:[{name:"show",rawName:"v-show",value:e.playing,expression:"playing"}],ref:"infoCard"}),r("setting-card",{directives:[{name:"show",rawName:"v-show",value:!e.playing,expression:"!playing"}],on:{"game-start":e.handleStart}})]},proxy:!0}])})],1)},a=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"outer"},[r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.msgMaskOn,expression:"msgMaskOn"}],staticClass:"msg_mask"},[r("div",[e._v(e._s(e.message))])])]),r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.maskOn,expression:"maskOn"}],staticClass:"mask"},[r("div",{staticClass:"text_box"},[r("div",{staticClass:"calcu"},[e._v("正在计算……")]),r("div",{staticClass:"limit"},[e._v("时限30秒")])])])]),r("div",{staticClass:"inner"},[e._m(0),r("div",{staticClass:"board_grid"},e._l(e.cellArray,(function(t){return r("div",{key:t.id,staticClass:"cell",on:{click:function(r){return e.handleClick(t.x,t.y)}}},[r("div",{staticClass:"chess",class:{empty_chess:0===e.uiBoard[t.id].chess,black_chess:e.uiBoard[t.id].chess===e.firstChess,white_chess:e.uiBoard[t.id].chess===e.secondChess,just_chess:t.id===e.justChess}},[r("div",{staticClass:"chess_number"},[e._v(" "+e._s(-1!=e.uiBoard[t.id].number?e.uiBoard[t.id].number:"")+" ")])])])})),0)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"img_box"},[i("img",{staticClass:"bg_img",attrs:{src:r("0034")}})])}],u=(r("a9e3"),0),c=1,h=2,l={name:"GameBoard",data:function(){return{cellArray:this.createArray(),msgMaskOn:!1,message:"no message"}},computed:{secondChess:function(){return this.firstChess===c?h:c}},props:{uiBoard:Array,justChess:{type:Number,default:-1},maskOn:{type:Boolean,default:!0},playing:{type:Boolean,default:!1},firstChess:{type:Number,default:h}},methods:{createArray:function(){for(var e=[],t=0;t<15;t++)for(var r=0;r<15;r++)e.push({x:t,y:r,id:15*t+r});return e},handleClick:function(e,t){this.playing&&this.$emit("cell-click",e,t)},showMsg:function(e){var t=this;this.message=e,this.msgMaskOn=!0,setTimeout((function(){t.msgMaskOn=!1}),2e3)}}},f=l,d=(r("c664"),r("2877")),v=Object(d["a"])(f,n,o,!1,null,"6beaab88",null),m=v.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my_grid"},[e._t("board"),r("transition",{attrs:{name:"fade"}},[r("div",[e._t("card")],2)])],2)},_=[],b={name:"MyGrid"},g=b,A=(r("1a15"),Object(d["a"])(g,p,_,!1,null,"66e5b9d2",null)),O=A.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("p",[e._v("最大搜索深度："+e._s(e.goMaxDepth))]),r("p",[e._v("考察结点总数："+e._s(e.nodeNum)+"；叶子结点个数："+e._s(e.numOfLeaf))]),r("p",[e._v("用时："+e._s(e.timeUsed)+"秒；超时："+e._s(e.isOutTime))]),r("p",[e._v("a-b 剪枝次数："+e._s(e.ABPruning))]),r("p",[e._v("回传 f 值："+e._s(e.f))]),r("p",[e._v("置换表命中总次数："+e._s(e.sumMatch))]),r("p",[e._v("完全命中："+e._s(e.completeMatch)+"；部分命中："+e._s(e.partialMatch)+"；叶子结点命中："+e._s(e.leafMatch))])])},T=[],M={startTime:0,isOutTime:!1,goMaxDepth:0,nodeNum:0,leafNum:0,winNum:0,completeMatch:0,partialMatch:0,leafMatch:0,ABPruning:0,f:0},y=M,I={name:"InfoCard",data:function(){return{goMaxDepth:0,nodeNum:0,numOfLeaf:0,completeMatch:0,partialMatch:0,leafMatch:0,sumMatch:0,ABPruning:0,timeUsed:0,isOutTime:!1,f:0}},methods:{update:function(){this.goMaxDepth=y.goMaxDepth,this.nodeNum=y.nodeNum,this.numOfLeaf=y.leafNum+y.winNum,this.completeMatch=y.completeMatch,this.partialMatch=y.partialMatch,this.leafMatch=y.leafMatch,this.sumMatch=this.completeMatch+this.partialMatch+this.leafMatch,this.ABPruning=y.ABPruning,this.timeUsed=Math.round(((new Date).getTime()-y.startTime)/1e3),this.isOutTime=y.isOutTime,this.f=y.f}}},N=I,C=(r("7d3a"),Object(d["a"])(N,E,T,!1,null,"e63cbf3a",null)),D=C.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstSide,expression:"firstSide"}],attrs:{type:"radio",name:"who_first",id:"com_first",value:"com_first"},domProps:{checked:e._q(e.firstSide,"com_first")},on:{change:function(t){e.firstSide="com_first"}}}),r("label",{attrs:{for:"com_first"}},[e._v("电脑先走")])]),r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstSide,expression:"firstSide"}],attrs:{type:"radio",name:"who_first",id:"hum_first",value:"hum_first"},domProps:{checked:e._q(e.firstSide,"hum_first")},on:{change:function(t){e.firstSide="hum_first"}}}),r("label",{attrs:{for:"hum_first"}},[e._v("你先走")])]),r("div",{staticClass:"line"}),r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.useHeuristic,expression:"useHeuristic"}],attrs:{type:"checkbox",id:"use_heuristic"},domProps:{checked:Array.isArray(e.useHeuristic)?e._i(e.useHeuristic,null)>-1:e.useHeuristic},on:{change:function(t){var r=e.useHeuristic,i=t.target,s=!!i.checked;if(Array.isArray(r)){var a=null,n=e._i(r,a);i.checked?n<0&&(e.useHeuristic=r.concat([a])):n>-1&&(e.useHeuristic=r.slice(0,n).concat(r.slice(n+1)))}else e.useHeuristic=s}}}),r("label",{attrs:{for:"use_heuristic"}},[e._v("使用启发式搜索")])]),r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.useTransTable,expression:"useTransTable"}],attrs:{type:"checkbox",id:"use_transtable"},domProps:{checked:Array.isArray(e.useTransTable)?e._i(e.useTransTable,null)>-1:e.useTransTable},on:{change:function(t){var r=e.useTransTable,i=t.target,s=!!i.checked;if(Array.isArray(r)){var a=null,n=e._i(r,a);i.checked?n<0&&(e.useTransTable=r.concat([a])):n>-1&&(e.useTransTable=r.slice(0,n).concat(r.slice(n+1)))}else e.useTransTable=s}}}),r("label",{attrs:{for:"use_transtable"}},[e._v("使用置换表")])]),r("div",{staticStyle:{width:"100%"}},[r("button",{staticClass:"button",on:{click:e.startGame}},[e._v("开始")])])])},B=[],L={BOARD_SIZE:15,MAX_EMPTY_NUM:10,START_KILLER:4,MAX_DEPTH:8,MAX_TIME:3e4,CLOSE_RADIUS:.05,CALC_LINE_ALGO:2,useTransTable:!0,useHeuristic:!0},S=L,w={name:"SettingCard",data:function(){return{firstSide:"com_first",useHeuristic:!0,useTransTable:!0}},methods:{startGame:function(){S.useHeuristic=this.useHeuristic,S.useTransTable=this.useTransTable;var e="com_first"===this.firstSide?c:h;this.$emit("game-start",e)}}},H=w,x=(r("bd8c"),Object(d["a"])(H,R,B,!1,null,"a98acc88",null)),k=x.exports,V=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("4e82"),r("d3b7"),r("3ca3"),r("ddb0"),r("d4ec")),Z=r("bee2"),P=(r("cb29"),{create:function(e,t,r){if(1===arguments.length){var i=new Array(e);return i.fill(0,0,e),i}if(2===arguments.length){for(var s=new Array(e),a=0;a<e;a++)s[a]=this.create(t);return s}for(var n=new Array(e),o=0;o<e;o++)n[o]=this.create(t,r);return n}}),F=P;r("aff5");function U(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}var j=function(){function e(){Object(V["a"])(this,e),this.empty=[],this.hum=[],this.com=[],this.zobristCode=0;for(var t=0;t<S.BOARD_SIZE*S.BOARD_SIZE;t++)this.empty.push(U()),this.hum.push(U()),this.com.push(U());for(var r=0;r<S.BOARD_SIZE*S.BOARD_SIZE;r++)this.zobristCode^=this.empty[r]}return Object(Z["a"])(e,[{key:"goUpdate",value:function(e,t,r,i){var s,a,n=e*S.BOARD_SIZE+t;s=r===h?this.hum:r===c?this.com:this.empty,a=i===h?this.hum:i===c?this.com:this.empty,this.zobristCode^=s[n],this.zobristCode^=a[n]}}]),e}(),X={VERTICAL:0,HORIZONTAL:1,DIAGONAL:2,ANTIDIAGONAL:3},K=X,G=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;Object(V["a"])(this,e),this.x=t,this.y=r,this.h=i},$=function e(){Object(V["a"])(this,e),this.coords=[],this.hum=F.create(36,4),this.com=F.create(36,4)},W=0,z=1,Y=2,q={FIVE:1e7,ALIVE_FOUR:1e5,BLOCKED_FOUR:1e4,ALIVE_THREE:1e3,BLOCKED_THREE:100,ALIVE_TWO:20,BLOCKED_TWO:2,INF:1e9},J=q,Q=F.create(11),ee=F.create(11),te=F.create(11);function re(e){if(ie(e),1===S.CALC_LINE_ALGO){var t=0,r=ae(e)*J.FIVE;if(t+=r,r>0)return t;var i=oe(e)*J.ALIVE_FOUR;t+=i,0===i&&(t+=ce(e)*J.BLOCKED_FOUR);var s=le(e)*J.ALIVE_THREE;t+=s,0===s&&(t+=de(e)*J.BLOCKED_THREE);var a=me(e)*J.ALIVE_TWO;return t+=a,0===a&&(t+=_e(e)*J.BLOCKED_TWO),t}return ne(e)?J.FIVE:ue(e)?J.ALIVE_FOUR:he(e)?J.BLOCKED_FOUR:fe(e)?J.ALIVE_THREE:ve(e)?J.BLOCKED_THREE:pe(e)?J.ALIVE_TWO:be(e)?J.BLOCKED_TWO:0}function ie(e){Q[0]=ee[0]=te[0]=0,e[0]===z?Q[0]=1:e[0]===W?ee[0]=1:te[0]=1;for(var t=1;t<e.length;t++)e[t]===z?(Q[t]=Q[t-1]+1,ee[t]=ee[t-1],te[t]=te[t-1]):e[t]===W?(ee[t]=ee[t-1]+1,Q[t]=Q[t-1],te[t]=te[t-1]):(te[t]=te[t-1]+1,Q[t]=Q[t-1],ee[t]=ee[t-1])}function se(e,t,r){var i;return i=r===z?Q:r===W?ee:te,0===e?i[t]:i[t]-i[e-1]}function ae(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,5===se(t,r,z)&&i++;return i}function ne(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,5===se(t,r,z))return!0;return!1}function oe(e){var t,r,i=0;for(t=0;t+6-1<e.length;t++)r=t+6-1,0===e[t]&&0===e[r]&&4===se(t,r,z)&&2===se(t,r,W)&&i++;return i}function ue(e){var t,r;for(t=0;t+6-1<e.length;t++)if(r=t+6-1,0===e[t]&&0===e[r]&&4===se(t,r,z)&&2===se(t,r,W))return!0;return!1}function ce(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,4===se(t,r,z)&&1===se(t,r,W)&&i++;return i}function he(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,4===se(t,r,z)&&1===se(t,r,W))return!0;return!1}function le(e){var t,r,i=0;for(t=0;t+6-1<e.length;t++)r=t+6-1,0===e[t]&&0===e[r]&&3===se(t,r,z)&&3===se(t,r,W)&&i++;return i}function fe(e){var t,r;for(t=0;t+6-1<e.length;t++)if(r=t+6-1,0===e[t]&&0===e[r]&&3===se(t,r,z)&&3===se(t,r,W))return!0;return!1}function de(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,3===se(t,r,z)&&2===se(t,r,W)&&i++;return i}function ve(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,3===se(t,r,z)&&2===se(t,r,W))return!0;return!1}function me(e){var t,r,i=0;for(t=0;t+6-1<e.length;t++)r=t+6-1,0===e[t]&&0===e[r]&&2===se(t,r,z)&&4===se(t,r,W)&&i++;return i}function pe(e){var t,r;for(t=0;t+6-1<e.length;t++)if(r=t+6-1,0===e[t]&&0===e[r]&&2===se(t,r,z)&&4===se(t,r,W))return!0;return!1}function _e(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,2===se(t,r,z)&&3===se(t,r,W)&&i++;return i}function be(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,2===se(t,r,z)&&3===se(t,r,W))return!0;return!1}for(var ge=re,Ae=function(){function e(){Object(V["a"])(this,e),this.boardMatrix=F.create(S.BOARD_SIZE,S.BOARD_SIZE),this.chessNum=0,this.humHeuristic=F.create(S.BOARD_SIZE,S.BOARD_SIZE,4),this.comHeuristic=F.create(S.BOARD_SIZE,S.BOARD_SIZE,4),this.neighborNum=F.create(S.BOARD_SIZE,S.BOARD_SIZE),this.humCloseNeighbor=F.create(S.BOARD_SIZE,S.BOARD_SIZE),this.comCloseNeighbor=F.create(S.BOARD_SIZE,S.BOARD_SIZE),this.zobrist=new j}return Object(Z["a"])(e,[{key:"reset",value:function(){this.chessNum=0;for(var e=0;e<S.BOARD_SIZE;e++)for(var t=0;t<S.BOARD_SIZE;t++){this.boardMatrix[e][t]=u,this.humCloseNeighbor[e][t]=0,this.comCloseNeighbor[e][t]=0,this.neighborNum[e][t]=0;for(var r=0;r<4;r++)this.humHeuristic[e][t][r]=0,this.comHeuristic[e][t][r]=0}}},{key:"put",value:function(t,r,i){return!e.outOfBound(t,r)&&(this.boardMatrix[t][r]==u&&(this.boardMatrix[t][r]=i,this.chessNum++,this.updateNeighborAfterDo(t,r,u),this.updateHeuristicAfterDo(t,r),this.zobrist.goUpdate(t,r,u,i),!0))}},{key:"undo",value:function(t,r,i){if(e.outOfBound(t,r))return!1;if(this.boardMatrix[t][r]===u)return!1;var s=this.boardMatrix[t][r];return this.boardMatrix[t][r]=u,this.chessNum--,this.updateNeighborAfterDo(t,r,s),this.restoreHeuristic(i),this.zobrist.goUpdate(t,r,s,u),!0}},{key:"isFull",value:function(){return this.chessNum===S.BOARD_SIZE*S.BOARD_SIZE}},{key:"hasNeighbor",value:function(e,t){return this.neighborNum[e][t]>0}},{key:"updateNeighborAfterDo",value:function(t,r,i){for(var s=t-2;s<=t+2;s++)for(var a=r-2;a<=r+2;a++)e.outOfBound(s,a)||s===t&&a===r||(i===u?this.neighborNum[s][a]++:this.neighborNum[s][a]--);for(var n=t-1;n<=t+1;n++)for(var o=r-1;o<=r+1;o++)e.outOfBound(n,o)||n===t&&o===r||(i===u?this.boardMatrix[t][r]===h?this.humCloseNeighbor[n][o]++:this.comCloseNeighbor[n][o]++:i===h?this.humCloseNeighbor[n][o]--:this.comCloseNeighbor[n][o]--)}},{key:"backupHeuristic",value:function(t,r){var i=e.lineCoords(t,r,K.VERTICAL),s=e.lineCoords(t,r,K.HORIZONTAL),a=e.lineCoords(t,r,K.DIAGONAL),n=e.lineCoords(t,r,K.ANTIDIAGONAL),o=new $;o.coords=[].concat(i).concat(s).concat(a).concat(n);for(var u=0;u<o.coords.length;u++){var c=o.coords[u],h=c.x,l=c.y;if(!e.outOfBound(h,l))for(var f=0;f<4;f++)o.hum[u][f]=this.humHeuristic[h][l][f],o.com[u][f]=this.comHeuristic[h][l][f]}return o}},{key:"restoreHeuristic",value:function(t){for(var r=0;r<t.coords.length;r++){var i=t.coords[r],s=i.x,a=i.y;if(!e.outOfBound(s,a))for(var n=0;n<4;n++)this.humHeuristic[s][a][n]=t.hum[r][n],this.comHeuristic[s][a][n]=t.com[r][n]}}},{key:"updateHeuristicAfterDo",value:function(t,r){var i=e.lineCoords(t,r,K.VERTICAL),s=e.lineCoords(t,r,K.HORIZONTAL),a=e.lineCoords(t,r,K.DIAGONAL),n=e.lineCoords(t,r,K.ANTIDIAGONAL);this.calcuLineHeuristic(i,K.VERTICAL),this.calcuLineHeuristic(s,K.HORIZONTAL),this.calcuLineHeuristic(a,K.DIAGONAL),this.calcuLineHeuristic(n,K.ANTIDIAGONAL)}},{key:"calcuLineHeuristic",value:function(t,r){var i=!0,s=!1,a=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var c=n.value,h=c.x,l=c.y;e.outOfBound(h,l)||this.boardMatrix[h][l]!==u||this.calcuHeuristic(h,l,r)}}catch(f){s=!0,a=f}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}}},{key:"calcuHeuristic",value:function(t,r,i){var s=e.lineCoords(t,r,i);this.boardMatrix[t][r]=c,this.comHeuristic[t][r][i]=this.score(s,c),this.boardMatrix[t][r]=h,this.humHeuristic[t][r][i]=this.score(s,h),this.boardMatrix[t][r]=u}},{key:"score",value:function(e,t){var r=this.standardizeLine(e,t);return ge(r)}},{key:"heuristic",value:function(e,t,r){var i;return r===c?(i=this.comHeuristic[e][t][K.VERTICAL]+this.comHeuristic[e][t][K.HORIZONTAL]+this.comHeuristic[e][t][K.DIAGONAL]+this.comHeuristic[e][t][K.ANTIDIAGONAL],i*=1+this.comCloseNeighbor[e][t]*S.CLOSE_RADIUS):(i=this.humHeuristic[e][t][K.VERTICAL]+this.humHeuristic[e][t][K.HORIZONTAL]+this.humHeuristic[e][t][K.DIAGONAL]+this.humHeuristic[e][t][K.ANTIDIAGONAL],i*=1+this.humCloseNeighbor[e][t]*S.CLOSE_RADIUS),Math.round(i)}},{key:"generator",value:function(e){var t,r;if(e===c?(t=c,r=h):(t=h,r=c),!S.useHeuristic){for(var i=[],s=0;s<S.BOARD_SIZE;s++)for(var a=0;a<S.BOARD_SIZE;a++)this.boardMatrix[s][a]===u&&this.hasNeighbor(s,a)&&i.push(new G(s,a));return i}for(var n=[],o=[],l=[],f=[],d=[],v=[],m=[],p=[],_=[],b=0;b<S.BOARD_SIZE;b++)for(var g=0;g<S.BOARD_SIZE;g++)if(this.boardMatrix[b][g]===u&&this.hasNeighbor(b,g)){var A=this.heuristic(b,g,t),O=this.heuristic(b,g,r);A>=J.FIVE||O>=J.FIVE?n.push(new G(b,g,J.FIVE)):A>=J.ALIVE_FOUR?o.push(new G(b,g,A)):O>=J.ALIVE_FOUR?l.push(new G(b,g,O)):A>=J.BLOCKED_FOUR?f.push(new G(b,g,A)):O>=J.BLOCKED_FOUR?d.push(new G(b,g,O)):A>=2*J.ALIVE_THREE?v.push(new G(b,g,A)):O>=2*J.ALIVE_THREE?m.push(new G(b,g,O)):A>=J.ALIVE_THREE?p.push(new G(b,g,A)):_.push(new G(b,g,Math.max(A,O)))}var E=[];function T(e,t){return e.h-t.h}return n.length>0?n:o.length>0?o:l.length>0?(f.sort(T),l.sort(T),E=f.length>0?E.concat(f).concat(l):E.concat(l),E):(v.sort(T),f.sort(T),p.sort(T),m.sort(T),d.sort(T),_.sort(T),E=E.concat(v).concat(f).concat(p).concat(m).concat(d).concat(_),E)}},{key:"generatorKill",value:function(e){var t,r;if(e===c?(t=c,r=h):(t=h,r=c),!S.useHeuristic){for(var i=[],s=0;s<S.BOARD_SIZE;s++)for(var a=0;a<S.BOARD_SIZE;a++)this.boardMatrix[s][a]===u&&this.hasNeighbor(s,a)&&i.push(new G(s,a));return i}for(var n=[],o=[],l=[],f=[],d=[],v=[],m=[],p=0;p<S.BOARD_SIZE;p++)for(var _=0;_<S.BOARD_SIZE;_++)if(this.boardMatrix[p][_]===u&&this.hasNeighbor(p,_)){var b=this.heuristic(p,_,t),g=this.heuristic(p,_,r);b>=J.FIVE||g>=J.FIVE?n.push(new G(p,_,J.FIVE)):b>=J.ALIVE_FOUR?o.push(new G(p,_,b)):g>=J.ALIVE_FOUR?l.push(new G(p,_,g)):b>=J.BLOCKED_FOUR?f.push(new G(p,_,b)):b>=2*J.ALIVE_THREE?d.push(new G(p,_,b)):g>=2*J.ALIVE_THREE?v.push(new G(p,_,g)):b>=J.ALIVE_THREE&&m.push(new G(p,_,b))}var A=[];function O(e,t){return e.h-t.h}return n.length>0?n:o.length>0?o:l.length>0?(f.sort(O),l.sort(O),A=f.length>0?A.concat(f).concat(l):A.concat(l),A):(d.sort(O),f.sort(O),m.sort(O),v.sort(O),A=A.concat(d).concat(f).concat(m).concat(v),A)}},{key:"evaluate",value:function(e){var t=this.evaluateOneSide(c),r=this.evaluateOneSide(h);return e===c&&r>=J.FIVE?-J.INF:e===h&&t>=J.FIVE?J.INF:t-r}},{key:"evaluateOneSide",value:function(e){for(var t=0,r=0;r<S.BOARD_SIZE;r++)for(var i=0;i<S.BOARD_SIZE;i++)this.boardMatrix[r][i]===u&&(t+=this.heuristic(r,i,e));return t}},{key:"isWin",value:function(e,t){return this.heuristic(e,t,this.boardMatrix[e][t])>=J.FIVE}},{key:"standardizeLine",value:function(t,r){var i=[Y],s=!0,a=!1,n=void 0;try{for(var o,c=t[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var h=o.value,l=h.x,f=h.y;e.outOfBound(l,f)?i.push(Y):this.boardMatrix[l][f]===u?i.push(W):this.boardMatrix[l][f]===r?i.push(z):i.push(Y)}}catch(d){a=!0,n=d}finally{try{s||null==c.return||c.return()}finally{if(a)throw n}}return i.push(Y),i}},{key:"toString",value:function(){var e="棋盘矩阵\n";e+="  ";for(var t=0;t<S.BOARD_SIZE;t++)e+=t%10+" ";e+="\n";for(var r=0;r<S.BOARD_SIZE;r++){e+=r%10+" ";for(var i=0;i<S.BOARD_SIZE;i++)this.boardMatrix[r][i]==u?e+="_ ":this.boardMatrix[r][i]==c?e+="C ":e+="H ";e+="\n"}return e}},{key:"neighborToString",value:function(){var e="2步邻居矩阵\n";e+="  ";for(var t=0;t<S.BOARD_SIZE;t++)e+=t%10+" ";e+="\n";for(var r=0;r<S.BOARD_SIZE;r++){e+=r%10+" ";for(var i=0;i<S.BOARD_SIZE;i++)this.boardMatrix[r][i]===h?e+="H ":this.boardMatrix[r][i]===c?e+="C ":0===this.neighborNum[r][i]?e+="_ ":e+=this.neighborNum[r][i]+" ";e+="\n"}return e}},{key:"closeToString",value:function(e){var t=e===c?this.comCloseNeighbor:this.humCloseNeighbor,r=e===c?"电脑":"人类";r+="近邻矩阵\n",r+="  ";for(var i=0;i<S.BOARD_SIZE;i++)r+=i%10+" ";r+="\n";for(var s=0;s<S.BOARD_SIZE;s++){r+=s%10+" ";for(var a=0;a<S.BOARD_SIZE;a++)this.boardMatrix[s][a]===h?r+="H ":this.boardMatrix[s][a]===c?r+="C ":0===t[s][a]?r+="_ ":r+=t[s][a]+" ";r+="\n"}return r}},{key:"heuristicToString",value:function(e){var t=e===c?"电脑":"人类";t+="空位分值矩阵\n",t+="  ";for(var r=0;r<S.BOARD_SIZE;r++)t+=r%10+" ";t+="\n";for(var i=0;i<S.BOARD_SIZE;i++){t+=i%10+" ";for(var s=0;s<S.BOARD_SIZE;s++)if(this.boardMatrix[i][s]===h)t+="H ";else if(this.boardMatrix[i][s]===c)t+="C ";else{var a=this.heuristic(i,s,e);a>=J.FIVE?t+="5 ":a>=J.ALIVE_FOUR?t+="4!":a>=J.BLOCKED_FOUR?t+="4 ":a>=J.ALIVE_THREE?t+="3!":a>=J.BLOCKED_THREE?t+="3 ":a>=J.ALIVE_TWO?t+="2!":a>=J.BLOCKED_TWO?t+="2 ":t+="_ "}t+="\n"}return t}},{key:"getNumber",value:function(){return this.chessNum}},{key:"getCode",value:function(){return this.zobrist.zobristCode}}],[{key:"outOfBound",value:function(e,t){return e<0||e>=S.BOARD_SIZE||t<0||t>=S.BOARD_SIZE}},{key:"lineCoords",value:function(e,t,r){var i=[];if(r===K.VERTICAL)for(var s=e-4;s<=e+4;s++)i.push(new G(s,t));else if(r==K.HORIZONTAL)for(var a=t-4;a<=t+4;a++)i.push(new G(e,a));else if(r==K.DIAGONAL)for(var n=e-4,o=t-4,u=0;u<=8;u++)i.push(new G(n+u,o+u));else for(var c=e+4,h=t-4,l=0;l<=8;l++)i.push(new G(c-l,h+l));return i}}]),e}(),Oe=0,Ee=1,Te=2,Me=3,ye=function(){function e(){Object(V["a"])(this,e),this.isValid=!1,this.hashCode=0,this.chessNum=0,this.fType=Oe,this.fValue=19,this.treeDepth=0,this.evaValid=!1,this.evaluate=0}return Object(Z["a"])(e,[{key:"validCell",value:function(e,t){return this.isValid&&this.hashCode===e&&this.chessNum===t}}]),e}(),Ie=1<<19,Ne=new Array(Ie),Ce=0;Ce<Ie;Ce++)Ne[Ce]=new ye;function De(e){var t=(e%Ie+Ie)%Ie;return Ne[t]}var Re=De,Be=0,Le=1;function Se(e,t,r,i,s,a,n){if(y.nodeNum++,y.goMaxDepth=Math.max(i,y.goMaxDepth),e.isWin(s,a))return y.winNum++,n===c?J.INF:-J.INF;var o=Re(e.getCode()),u=S.MAX_DEPTH-i;if(e.isFull()||i===S.MAX_DEPTH){var l;if(y.leafNum++,S.useTransTable&&o.validCell(e.getCode(),e.getNumber())&&o.evaValid)y.leafMatch++,l=o.evaluate;else{var f=r===Be?h:c;l=e.evaluate(f),o.isValid=!0,o.hashCode=e.getCode(),o.chessNum=e.getNumber(),o.evaValid=!0,o.evaluate=l}return l}if(r===Be){var d=-J.INF;if(S.useTransTable&&o.validCell(e.getCode(),e.getNumber())&&o.fType!=Oe&&o.treeDepth>=u){if(o.fType===Ee)return y.completeMatch++,o.fValue;o.fType===Te&&(y.partialMatch++,d=o.fValue)}for(var v=i>=S.START_KILLER?e.generatorKill(c):e.generator(c),m=!1,p=0,_=0;p<v.length&&_<S.MAX_EMPTY_NUM;p++,_++){var b=v[p].x,g=v[p].y,A=e.backupHeuristic(b,g);e.put(b,g,c);var O=Se(e,d,Le,i+1,b,g,c);if(e.undo(b,g,A),O>d&&(d=O),d>t){y.ABPruning++,m=!0;break}if((new Date).getTime()-y.startTime>S.MAX_TIME){y.isOutTime=!0,m=!0;break}}return S.useTransTable&&(o.validCell(e.getCode(),e.getNumber())&&e.fType!==Oe?u>=o.treeDepth&&(m?(u>o.treeDepth||u===o.treeDepth&&d>o.f)&&(o.f=d,o.fType=Te,o.treeDepth=u):(o.f=d,o.fType=Ee,o.treeDepth=u)):(o.isValid=!0,o.hashCode=e.getCode(),o.chessNum=e.getNumber(),o.treeDepth=u,o.f=d,o.fType=m?Te:Ee)),d}var E=J.INF;if(S.useTransTable&&o.validCell(e.getCode(),e.getNumber())&&o.fType!=Oe&&o.treeDepth>=u){if(o.fType===Ee)return y.completeMatch++,o.fValue;o.fType===Me&&(y.partialMatch++,E=o.fValue)}for(var T=i>=S.START_KILLER?e.generatorKill(h):e.generator(h),M=!1,I=0,N=0;I<T.length&&N<S.MAX_EMPTY_NUM;I++,N++){var C=T[I].x,D=T[I].y,R=e.backupHeuristic(C,D);e.put(C,D,h);var B=Se(e,E,Be,i+1,C,D,h);if(e.undo(C,D,R),B<E&&(E=B),E<t){y.ABPruning++,M=!0;break}if((new Date).getTime()-y.startTime>S.MAX_TIME){y.isOutTime=!0,M=!0;break}}return S.useTransTable&&(o.validCell(e.getCode(),e.getNumber())&&e.fType!==Oe?u>=o.treeDepth&&(M?(u>o.treeDepth||u===o.treeDepth&&E<o.f)&&(o.f=E,o.fType=Me,o.treeDepth=u):(o.f=E,o.fType=Ee,o.treeDepth=u)):(o.isValid=!0,o.hashCode=e.getCode(),o.chessNum=e.getNumber(),o.treeDepth=u,o.f=E,o.fType=M?Me:Ee)),E}function we(e){He(),S.useHeuristic?e.getNumber()<4?(S.MAX_DEPTH=3,S.MAX_EMPTY_NUM=20):e.getNumber()<6?(S.MAX_DEPTH=4,S.MAX_EMPTY_NUM=18):e.getNumber()<8?(S.MAX_DEPTH=5,S.MAX_EMPTY_NUM=16):e.getNumber()<10?(S.MAX_DEPTH=6,S.MAX_EMPTY_NUM=15):e.getNumber()<12?(S.MAX_DEPTH=7,S.MAX_EMPTY_NUM=14):(S.MAX_DEPTH=8,S.MAX_EMPTY_NUM=13):(S.MAX_DEPTH=3,S.MAX_EMPTY_NUM=225);for(var t=-J.INF-1,r=new G(7,7),i=e.generator(c),s=0,a=0;s<i.length&&a<S.MAX_EMPTY_NUM;s++,a++){var n=i[s].x,o=i[s].y,u=e.backupHeuristic(n,o);e.put(n,o,c);var h=Se(e,t,Le,1,n,o,c);if(e.undo(n,o,u),h>t&&(t=h,r.x=n,r.y=o),t>=J.INF)break}return y.f=t,console.log(xe(t)),r}function He(){y.startTime=(new Date).getTime(),y.isOutTime=!1,y.goMaxDepth=0,y.nodeNum=1,y.leafNum=0,y.winNum=0,y.completeMatch=0,y.partialMatch=0,y.leafMatch=0,y.ABPruning=0,y.f=0}function xe(){var e="";return e+="最大搜索深度："+y.goMaxDepth+"\n",e+="考察结点个数："+y.nodeNum+" 叶子结点个数："+y.leafNum+" 输赢局面个数："+y.winNum+"\n",e+="置换表命中总次数："+(y.completeMatch+y.partialMatch+y.leafMatch)+" 完全命中："+y.completeMatch+" 部分命中："+y.partialMatch+" 叶子结点命中："+y.leafMatch+"\n",e+="用时："+Math.round(((new Date).getTime()-y.startTime)/1e3)+"秒 超时："+y.isOutTime+"\n",e+="ab剪枝次数："+y.ABPruning+"\n",e+="回传f值："+y.f+"\n",e}var ke=we,Ve=new Ae,Ze=0,Pe=1,Fe=2,Ue=3,je=Ze,Xe=!1;function Ke(){je=Ze,Xe=!1,Ve.reset()}function Ge(e,t){Ve.put(e,t,h),console.log("人类落子 ("+e+", "+t+")"),Ve.isWin(e,t)?(Xe=!0,je=Pe):Ve.isFull()&&(Xe=!0,je=Ue)}function $e(){var e=ke(Ve),t=e.x,r=e.y;return Ve.put(t,r,c),console.log("电脑落子 ("+t+", "+r+")"),Ve.isWin(t,r)?(Xe=!0,je=Fe):Ve.isFull()&&(Xe=!0,je=Ue),{x:e.x,y:e.y}}var We={name:"app",components:{"game-boardObj":m,"info-card":D,"setting-card":k,grid:O},data:function(){return{uiBoard:new Array(225),StatusInfo:"no status info",chessNumber:0,justChess:-1,maskOn:!1,playing:!1,firstChess:c}},methods:{init:function(){for(var e=0;e<225;e++){var t={chess:u,number:-1};this.uiBoard[e]=t,this.$set(this.uiBoard,e,t)}this.chessNumber=0,this.justChess=-1,this.maskOn=!1},handleStart:function(e){var t=this;this.init(),Ke(),this.$refs.board.showMsg("开始"),this.firstChess=e,console.log(this.firstChess),this.playing=!0,this.firstChess===c&&setTimeout((function(){t.handleComputerPlay()}),2601)},handleComputerPlay:function(){var e=$e(),t=15*e.x+e.y,r={chess:c,number:++this.chessNumber};this.uiBoard[t]=r,this.$set(this.uiBoard,t,r),this.justChess=t,this.maskOn=!1,this.$refs.infoCard.update(),Xe&&(this.playing=!1,je===Fe?this.$refs.board.showMsg("电脑赢了"):je===Ue&&this.$refs.board.showMsg("平局"))},handleClick:function(e,t){var r=this,i=15*e+t;if(this.playing&&this.uiBoard[i].chess===u){this.maskOn=!0;var s={chess:h,number:++this.chessNumber};this.uiBoard[i].chess=s,this.$set(this.uiBoard,i,s),this.justChess=i,setTimeout((function(){Ge(e,t),Xe?(r.playing=!1,r.maskOn=!1,je===Pe?r.$refs.board.showMsg("你赢了"):je===Ue&&r.$refs.board.showMsg("平局")):r.handleComputerPlay()}),305)}}},created:function(){this.init()}},ze=We,Ye=(r("034f"),Object(d["a"])(ze,s,a,!1,null,null,null)),qe=Ye.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(qe)}}).$mount("#app")},"7d3a":function(e,t,r){"use strict";var i=r("d88a"),s=r.n(i);s.a},8126:function(e,t,r){},"85ec":function(e,t,r){},9851:function(e,t,r){},bd8c:function(e,t,r){"use strict";var i=r("c9e2"),s=r.n(i);s.a},c664:function(e,t,r){"use strict";var i=r("8126"),s=r.n(i);s.a},c9e2:function(e,t,r){},d88a:function(e,t,r){}});
//# sourceMappingURL=app.9a7b420b.js.map