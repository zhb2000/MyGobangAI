(function(e){function t(t){for(var i,n,o=t[0],u=t[1],c=t[2],l=0,f=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);h&&h(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,o=1;o<r.length;o++){var u=r[o];0!==s[u]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},s={app:0},a=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var h=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0034":function(e,t,r){e.exports=r.p+"img/board.5442f90f.jpg"},"034f":function(e,t,r){"use strict";var i=r("85ec"),s=r.n(i);s.a},"1a15":function(e,t,r){"use strict";var i=r("9851"),s=r.n(i);s.a},"3df8":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("grid",{scopedSlots:e._u([{key:"board",fn:function(){return[r("game-boardObj",{ref:"board",attrs:{"ui-board":e.uiBoard,"just-chess":e.justChess,"mask-on":e.maskOn,playing:e.playing,"first-chess":e.firstChess},on:{"cell-click":e.handleClick}})]},proxy:!0},{key:"card",fn:function(){return[r("info-card",{directives:[{name:"show",rawName:"v-show",value:e.playing,expression:"playing"}],ref:"infoCard"}),r("setting-card",{directives:[{name:"show",rawName:"v-show",value:!e.playing,expression:"!playing"}],on:{"game-start":e.handleStart}})]},proxy:!0}])})],1)},a=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"outer"},[r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.msgMaskOn,expression:"msgMaskOn"}],staticClass:"msg_mask"},[r("div",[e._v(e._s(e.message))])])]),r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.maskOn,expression:"maskOn"}],staticClass:"mask"},[r("div",{staticClass:"text_box"},[r("div",{staticClass:"calcu"},[e._v("正在计算……")]),r("div",{staticClass:"limit"},[e._v("时限30秒")])])])]),r("div",{staticClass:"inner"},[e._m(0),r("div",{staticClass:"board_grid"},e._l(e.cellArray,(function(t){return r("div",{key:t.id,staticClass:"cell",on:{click:function(r){return e.handleClick(t.x,t.y)}}},[r("div",{staticClass:"chess",class:{empty_chess:0===e.uiBoard[t.id].chess,black_chess:e.uiBoard[t.id].chess===e.firstChess,white_chess:e.uiBoard[t.id].chess===e.secondChess,just_chess:t.id===e.justChess}},[r("div",{staticClass:"chess_number"},[e._v(" "+e._s(-1!=e.uiBoard[t.id].number?e.uiBoard[t.id].number:"")+" ")])])])})),0)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"img_box"},[i("img",{staticClass:"bg_img",attrs:{src:r("0034")}})])}],u=(r("a9e3"),0),c=1,h=2,l={name:"GameBoard",data:function(){return{cellArray:this.createArray(),msgMaskOn:!1,message:"no message"}},computed:{secondChess:function(){return this.firstChess===c?h:c}},props:{uiBoard:Array,justChess:{type:Number,default:-1},maskOn:{type:Boolean,default:!0},playing:{type:Boolean,default:!1},firstChess:{type:Number,default:h}},methods:{createArray:function(){for(var e=[],t=0;t<15;t++)for(var r=0;r<15;r++)e.push({x:t,y:r,id:15*t+r});return e},handleClick:function(e,t){this.playing&&this.$emit("cell-click",e,t)},showMsg:function(e){var t=this;this.message=e,this.msgMaskOn=!0,setTimeout((function(){t.msgMaskOn=!1}),2e3)}}},f=l,d=(r("7d32"),r("2877")),m=Object(d["a"])(f,n,o,!1,null,"521b3a22",null),v=m.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my_grid"},[e._t("board"),r("transition",{attrs:{name:"fade"}},[r("div",[e._t("card")],2)])],2)},_=[],g={name:"MyGrid"},b=g,A=(r("1a15"),Object(d["a"])(b,p,_,!1,null,"66e5b9d2",null)),O=A.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("p",[e._v("最大搜索深度："+e._s(e.goMaxDepth))]),r("p",[e._v("考察结点总数："+e._s(e.nodeNum)+"；叶子结点个数："+e._s(e.numOfLeaf))]),r("p",[e._v("用时："+e._s(e.timeUsed)+"秒；超时："+e._s(e.isOutTime))]),r("p",[e._v("a-b 剪枝次数："+e._s(e.ABPruning))]),r("p",[e._v("回传 f 值："+e._s(e.f))]),r("p",[e._v("置换表命中总次数："+e._s(e.sumMatch))]),r("p",[e._v("完全命中："+e._s(e.completeMatch)+"；部分命中："+e._s(e.partialMatch)+"；叶子结点命中："+e._s(e.leafMatch))])])},T=[],M={startTime:0,isOutTime:!1,goMaxDepth:0,posDepth:0,nodeNum:0,leafNum:0,winNum:0,completeMatch:0,partialMatch:0,leafMatch:0,ABPruning:0,f:0},y=M,I={name:"InfoCard",data:function(){return{goMaxDepth:0,nodeNum:0,numOfLeaf:0,completeMatch:0,partialMatch:0,leafMatch:0,sumMatch:0,ABPruning:0,timeUsed:0,isOutTime:!1,f:0}},methods:{update:function(){this.goMaxDepth=y.goMaxDepth,this.nodeNum=y.nodeNum,this.numOfLeaf=y.leafNum+y.winNum,this.completeMatch=y.completeMatch,this.partialMatch=y.partialMatch,this.leafMatch=y.leafMatch,this.sumMatch=this.completeMatch+this.partialMatch+this.leafMatch,this.ABPruning=y.ABPruning,this.timeUsed=Math.round(((new Date).getTime()-y.startTime)/1e3),this.isOutTime=y.isOutTime,this.f=y.f}}},N=I,C=(r("7d3a"),Object(d["a"])(N,E,T,!1,null,"e63cbf3a",null)),D=C.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstSide,expression:"firstSide"}],attrs:{type:"radio",name:"who_first",id:"com_first",value:"com_first"},domProps:{checked:e._q(e.firstSide,"com_first")},on:{change:function(t){e.firstSide="com_first"}}}),r("label",{attrs:{for:"com_first"}},[e._v("电脑先走")])]),r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstSide,expression:"firstSide"}],attrs:{type:"radio",name:"who_first",id:"hum_first",value:"hum_first"},domProps:{checked:e._q(e.firstSide,"hum_first")},on:{change:function(t){e.firstSide="hum_first"}}}),r("label",{attrs:{for:"hum_first"}},[e._v("你先走")])]),r("div",{staticClass:"line"}),r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.useHeuristic,expression:"useHeuristic"}],attrs:{type:"checkbox",id:"use_heuristic"},domProps:{checked:Array.isArray(e.useHeuristic)?e._i(e.useHeuristic,null)>-1:e.useHeuristic},on:{change:function(t){var r=e.useHeuristic,i=t.target,s=!!i.checked;if(Array.isArray(r)){var a=null,n=e._i(r,a);i.checked?n<0&&(e.useHeuristic=r.concat([a])):n>-1&&(e.useHeuristic=r.slice(0,n).concat(r.slice(n+1)))}else e.useHeuristic=s}}}),r("label",{attrs:{for:"use_heuristic"}},[e._v("使用启发式搜索")])]),r("div",{staticClass:"row"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.useTransTable,expression:"useTransTable"}],attrs:{type:"checkbox",id:"use_transtable"},domProps:{checked:Array.isArray(e.useTransTable)?e._i(e.useTransTable,null)>-1:e.useTransTable},on:{change:function(t){var r=e.useTransTable,i=t.target,s=!!i.checked;if(Array.isArray(r)){var a=null,n=e._i(r,a);i.checked?n<0&&(e.useTransTable=r.concat([a])):n>-1&&(e.useTransTable=r.slice(0,n).concat(r.slice(n+1)))}else e.useTransTable=s}}}),r("label",{attrs:{for:"use_transtable"}},[e._v("使用置换表")])]),r("div",{staticStyle:{width:"100%"}},[r("button",{staticClass:"button",on:{click:e.startGame}},[e._v("开始")])])])},B=[],S={BOARD_SIZE:15,MAX_EMPTY_NUM:10,START_KILLER:4,MAX_DEPTH:8,MAX_TIME:3e4,CLOSE_RADIUS:.05,CALC_LINE_ALGO:2,useTransTable:!0,useHeuristic:!0},L=S,x={name:"SettingCard",data:function(){return{firstSide:"com_first",useHeuristic:!0,useTransTable:!0}},methods:{startGame:function(){L.useHeuristic=this.useHeuristic,L.useTransTable=this.useTransTable;var e="com_first"===this.firstSide?c:h;this.$emit("game-start",e)}}},w=x,H=(r("bd8c"),Object(d["a"])(w,R,B,!1,null,"a98acc88",null)),k=H.exports,V=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("4e82"),r("d3b7"),r("3ca3"),r("ddb0"),r("d4ec")),Z=r("bee2"),F=(r("cb29"),{create:function(e,t,r){if(1===arguments.length){var i=new Array(e);return i.fill(0,0,e),i}if(2===arguments.length){for(var s=new Array(e),a=0;a<e;a++)s[a]=this.create(t);return s}for(var n=new Array(e),o=0;o<e;o++)n[o]=this.create(t,r);return n}}),P=F;r("aff5");function U(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}var j=function(){function e(){Object(V["a"])(this,e),this.empty=[],this.hum=[],this.com=[],this.zobristCode=0;for(var t=0;t<L.BOARD_SIZE*L.BOARD_SIZE;t++)this.empty.push(U()),this.hum.push(U()),this.com.push(U());for(var r=0;r<L.BOARD_SIZE*L.BOARD_SIZE;r++)this.zobristCode^=this.empty[r]}return Object(Z["a"])(e,[{key:"goUpdate",value:function(e,t,r,i){var s,a,n=e*L.BOARD_SIZE+t;s=r===h?this.hum:r===c?this.com:this.empty,a=i===h?this.hum:i===c?this.com:this.empty,this.zobristCode^=s[n],this.zobristCode^=a[n]}}]),e}(),X={VERTICAL:0,HORIZONTAL:1,DIAGONAL:2,ANTIDIAGONAL:3},K=X,G=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;Object(V["a"])(this,e),this.x=t,this.y=r,this.h=i},$=function e(){Object(V["a"])(this,e),this.coords=[],this.hum=P.create(36,4),this.com=P.create(36,4)},W=0,z=1,Y=2,q={FIVE:1e7,ALIVE_FOUR:1e5,BLOCKED_FOUR:1e4,ALIVE_THREE:1e3,BLOCKED_THREE:100,ALIVE_TWO:20,BLOCKED_TWO:2,INF:1e9},J=q,Q=P.create(11),ee=P.create(11),te=P.create(11);function re(e){if(ie(e),1===L.CALC_LINE_ALGO){var t=0,r=ae(e)*J.FIVE;if(t+=r,r>0)return t;var i=oe(e)*J.ALIVE_FOUR;t+=i,0===i&&(t+=ce(e)*J.BLOCKED_FOUR);var s=le(e)*J.ALIVE_THREE;t+=s,0===s&&(t+=de(e)*J.BLOCKED_THREE);var a=ve(e)*J.ALIVE_TWO;return t+=a,0===a&&(t+=_e(e)*J.BLOCKED_TWO),t}return ne(e)?J.FIVE:ue(e)?J.ALIVE_FOUR:he(e)?J.BLOCKED_FOUR:fe(e)?J.ALIVE_THREE:me(e)?J.BLOCKED_THREE:pe(e)?J.ALIVE_TWO:ge(e)?J.BLOCKED_TWO:0}function ie(e){Q[0]=ee[0]=te[0]=0,e[0]===z?Q[0]=1:e[0]===W?ee[0]=1:te[0]=1;for(var t=1;t<e.length;t++)e[t]===z?(Q[t]=Q[t-1]+1,ee[t]=ee[t-1],te[t]=te[t-1]):e[t]===W?(ee[t]=ee[t-1]+1,Q[t]=Q[t-1],te[t]=te[t-1]):(te[t]=te[t-1]+1,Q[t]=Q[t-1],ee[t]=ee[t-1])}function se(e,t,r){var i;return i=r===z?Q:r===W?ee:te,0===e?i[t]:i[t]-i[e-1]}function ae(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,5===se(t,r,z)&&i++;return i}function ne(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,5===se(t,r,z))return!0;return!1}function oe(e){var t,r,i=0;for(t=0;t+6-1<e.length;t++)r=t+6-1,0===e[t]&&0===e[r]&&4===se(t,r,z)&&2===se(t,r,W)&&i++;return i}function ue(e){var t,r;for(t=0;t+6-1<e.length;t++)if(r=t+6-1,0===e[t]&&0===e[r]&&4===se(t,r,z)&&2===se(t,r,W))return!0;return!1}function ce(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,4===se(t,r,z)&&1===se(t,r,W)&&i++;return i}function he(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,4===se(t,r,z)&&1===se(t,r,W))return!0;return!1}function le(e){var t,r,i=0;for(t=0;t+6-1<e.length;t++)r=t+6-1,0===e[t]&&0===e[r]&&3===se(t,r,z)&&3===se(t,r,W)&&i++;return i}function fe(e){var t,r;for(t=0;t+6-1<e.length;t++)if(r=t+6-1,0===e[t]&&0===e[r]&&3===se(t,r,z)&&3===se(t,r,W))return!0;return!1}function de(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,3===se(t,r,z)&&2===se(t,r,W)&&i++;return i}function me(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,3===se(t,r,z)&&2===se(t,r,W))return!0;return!1}function ve(e){var t,r,i=0;for(t=0;t+6-1<e.length;t++)r=t+6-1,0===e[t]&&0===e[r]&&2===se(t,r,z)&&4===se(t,r,W)&&i++;return i}function pe(e){var t,r;for(t=0;t+6-1<e.length;t++)if(r=t+6-1,0===e[t]&&0===e[r]&&2===se(t,r,z)&&4===se(t,r,W))return!0;return!1}function _e(e){var t,r,i=0;for(t=0;t+5-1<e.length;t++)r=t+5-1,2===se(t,r,z)&&3===se(t,r,W)&&i++;return i}function ge(e){var t,r;for(t=0;t+5-1<e.length;t++)if(r=t+5-1,2===se(t,r,z)&&3===se(t,r,W))return!0;return!1}var be=re,Ae=function(){function e(){Object(V["a"])(this,e),this.boardMatrix=P.create(L.BOARD_SIZE,L.BOARD_SIZE),this.chessNum=0,this.humHeuristic=P.create(L.BOARD_SIZE,L.BOARD_SIZE,4),this.comHeuristic=P.create(L.BOARD_SIZE,L.BOARD_SIZE,4),this.neighborNum=P.create(L.BOARD_SIZE,L.BOARD_SIZE),this.humCloseNeighbor=P.create(L.BOARD_SIZE,L.BOARD_SIZE),this.comCloseNeighbor=P.create(L.BOARD_SIZE,L.BOARD_SIZE),this.zobrist=new j}return Object(Z["a"])(e,[{key:"reset",value:function(){this.chessNum=0;for(var e=0;e<L.BOARD_SIZE;e++)for(var t=0;t<L.BOARD_SIZE;t++){this.boardMatrix[e][t]=u,this.humCloseNeighbor[e][t]=0,this.comCloseNeighbor[e][t]=0,this.neighborNum[e][t]=0;for(var r=0;r<4;r++)this.humHeuristic[e][t][r]=0,this.comHeuristic[e][t][r]=0}}},{key:"put",value:function(t,r,i){return!e.outOfBound(t,r)&&(this.boardMatrix[t][r]==u&&(this.boardMatrix[t][r]=i,this.chessNum++,this.updateNeighborAfterDo(t,r,u),this.updateHeuristicAfterDo(t,r),this.zobrist.goUpdate(t,r,u,i),!0))}},{key:"undo",value:function(t,r,i){if(e.outOfBound(t,r))return!1;if(this.boardMatrix[t][r]===u)return!1;var s=this.boardMatrix[t][r];return this.boardMatrix[t][r]=u,this.chessNum--,this.updateNeighborAfterDo(t,r,s),this.restoreHeuristic(i),this.zobrist.goUpdate(t,r,s,u),!0}},{key:"isFull",value:function(){return this.chessNum===L.BOARD_SIZE*L.BOARD_SIZE}},{key:"hasNeighbor",value:function(e,t){return this.neighborNum[e][t]>0}},{key:"updateNeighborAfterDo",value:function(t,r,i){for(var s=t-2;s<=t+2;s++)for(var a=r-2;a<=r+2;a++)e.outOfBound(s,a)||s===t&&a===r||(i===u?this.neighborNum[s][a]++:this.neighborNum[s][a]--);for(var n=t-1;n<=t+1;n++)for(var o=r-1;o<=r+1;o++)e.outOfBound(n,o)||n===t&&o===r||(i===u?this.boardMatrix[t][r]===h?this.humCloseNeighbor[n][o]++:this.comCloseNeighbor[n][o]++:i===h?this.humCloseNeighbor[n][o]--:this.comCloseNeighbor[n][o]--)}},{key:"backupHeuristic",value:function(t,r){var i=e.lineCoords(t,r,K.VERTICAL),s=e.lineCoords(t,r,K.HORIZONTAL),a=e.lineCoords(t,r,K.DIAGONAL),n=e.lineCoords(t,r,K.ANTIDIAGONAL),o=new $;o.coords=[].concat(i).concat(s).concat(a).concat(n);for(var u=0;u<o.coords.length;u++){var c=o.coords[u],h=c.x,l=c.y;if(!e.outOfBound(h,l))for(var f=0;f<4;f++)o.hum[u][f]=this.humHeuristic[h][l][f],o.com[u][f]=this.comHeuristic[h][l][f]}return o}},{key:"restoreHeuristic",value:function(t){for(var r=0;r<t.coords.length;r++){var i=t.coords[r],s=i.x,a=i.y;if(!e.outOfBound(s,a))for(var n=0;n<4;n++)this.humHeuristic[s][a][n]=t.hum[r][n],this.comHeuristic[s][a][n]=t.com[r][n]}}},{key:"updateHeuristicAfterDo",value:function(t,r){var i=e.lineCoords(t,r,K.VERTICAL),s=e.lineCoords(t,r,K.HORIZONTAL),a=e.lineCoords(t,r,K.DIAGONAL),n=e.lineCoords(t,r,K.ANTIDIAGONAL);this.calcuLineHeuristic(i,K.VERTICAL),this.calcuLineHeuristic(s,K.HORIZONTAL),this.calcuLineHeuristic(a,K.DIAGONAL),this.calcuLineHeuristic(n,K.ANTIDIAGONAL)}},{key:"calcuLineHeuristic",value:function(t,r){var i=!0,s=!1,a=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var c=n.value,h=c.x,l=c.y;e.outOfBound(h,l)||this.boardMatrix[h][l]!==u||this.calcuHeuristic(h,l,r)}}catch(f){s=!0,a=f}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}}},{key:"calcuHeuristic",value:function(t,r,i){var s=e.lineCoords(t,r,i);this.boardMatrix[t][r]=c,this.comHeuristic[t][r][i]=this.score(s,c),this.boardMatrix[t][r]=h,this.humHeuristic[t][r][i]=this.score(s,h),this.boardMatrix[t][r]=u}},{key:"score",value:function(e,t){var r=this.standardizeLine(e,t);return be(r)}},{key:"heuristic",value:function(e,t,r){var i;return r===c?(i=this.comHeuristic[e][t][K.VERTICAL]+this.comHeuristic[e][t][K.HORIZONTAL]+this.comHeuristic[e][t][K.DIAGONAL]+this.comHeuristic[e][t][K.ANTIDIAGONAL],i*=1+this.comCloseNeighbor[e][t]*L.CLOSE_RADIUS):(i=this.humHeuristic[e][t][K.VERTICAL]+this.humHeuristic[e][t][K.HORIZONTAL]+this.humHeuristic[e][t][K.DIAGONAL]+this.humHeuristic[e][t][K.ANTIDIAGONAL],i*=1+this.humCloseNeighbor[e][t]*L.CLOSE_RADIUS),Math.round(i)}},{key:"generator",value:function(e){var t,r;if(e===c?(t=c,r=h):(t=h,r=c),!L.useHeuristic){for(var i=[],s=0;s<L.BOARD_SIZE;s++)for(var a=0;a<L.BOARD_SIZE;a++)this.boardMatrix[s][a]===u&&this.hasNeighbor(s,a)&&i.push(new G(s,a));return i}for(var n=[],o=[],l=[],f=[],d=[],m=[],v=[],p=[],_=[],g=0;g<L.BOARD_SIZE;g++)for(var b=0;b<L.BOARD_SIZE;b++)if(this.boardMatrix[g][b]===u&&this.hasNeighbor(g,b)){var A=this.heuristic(g,b,t),O=this.heuristic(g,b,r);A>=J.FIVE||O>=J.FIVE?n.push(new G(g,b,J.FIVE)):A>=J.ALIVE_FOUR?o.push(new G(g,b,A)):O>=J.ALIVE_FOUR?l.push(new G(g,b,O)):A>=J.BLOCKED_FOUR?f.push(new G(g,b,A)):O>=J.BLOCKED_FOUR?d.push(new G(g,b,O)):A>=2*J.ALIVE_THREE?m.push(new G(g,b,A)):O>=2*J.ALIVE_THREE?v.push(new G(g,b,O)):A>=J.ALIVE_THREE?p.push(new G(g,b,A)):_.push(new G(g,b,Math.max(A,O)))}var E=[];function T(e,t){return e.h-t.h}return n.length>0?n:o.length>0?o:l.length>0?(f.sort(T),l.sort(T),E=f.length>0?E.concat(f).concat(l):E.concat(l),E):(m.sort(T),f.sort(T),p.sort(T),v.sort(T),d.sort(T),_.sort(T),E=E.concat(m).concat(f).concat(p).concat(v).concat(d).concat(_),E)}},{key:"generatorKill",value:function(e){var t,r;if(e===c?(t=c,r=h):(t=h,r=c),!L.useHeuristic){for(var i=[],s=0;s<L.BOARD_SIZE;s++)for(var a=0;a<L.BOARD_SIZE;a++)this.boardMatrix[s][a]===u&&this.hasNeighbor(s,a)&&i.push(new G(s,a));return i}for(var n=[],o=[],l=[],f=[],d=[],m=[],v=[],p=0;p<L.BOARD_SIZE;p++)for(var _=0;_<L.BOARD_SIZE;_++)if(this.boardMatrix[p][_]===u&&this.hasNeighbor(p,_)){var g=this.heuristic(p,_,t),b=this.heuristic(p,_,r);g>=J.FIVE||b>=J.FIVE?n.push(new G(p,_,J.FIVE)):g>=J.ALIVE_FOUR?o.push(new G(p,_,g)):b>=J.ALIVE_FOUR?l.push(new G(p,_,b)):g>=J.BLOCKED_FOUR?f.push(new G(p,_,g)):g>=2*J.ALIVE_THREE?d.push(new G(p,_,g)):b>=2*J.ALIVE_THREE?m.push(new G(p,_,b)):g>=J.ALIVE_THREE&&v.push(new G(p,_,g))}var A=[];function O(e,t){return e.h-t.h}return n.length>0?n:o.length>0?o:l.length>0?(f.sort(O),l.sort(O),A=f.length>0?A.concat(f).concat(l):A.concat(l),A):(d.sort(O),f.sort(O),v.sort(O),m.sort(O),A=A.concat(d).concat(f).concat(v).concat(m),A)}},{key:"evaluate",value:function(e){var t=this.evaluateOneSide(c),r=this.evaluateOneSide(h);return e===c&&r>=J.FIVE?-J.INF:e===h&&t>=J.FIVE?J.INF:t-r}},{key:"evaluateOneSide",value:function(e){for(var t=0,r=0;r<L.BOARD_SIZE;r++)for(var i=0;i<L.BOARD_SIZE;i++)this.boardMatrix[r][i]===u&&(t+=this.heuristic(r,i,e));return t}},{key:"isWin",value:function(e,t){return this.heuristic(e,t,this.boardMatrix[e][t])>=J.FIVE}},{key:"standardizeLine",value:function(t,r){var i=[Y],s=!0,a=!1,n=void 0;try{for(var o,c=t[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var h=o.value,l=h.x,f=h.y;e.outOfBound(l,f)?i.push(Y):this.boardMatrix[l][f]===u?i.push(W):this.boardMatrix[l][f]===r?i.push(z):i.push(Y)}}catch(d){a=!0,n=d}finally{try{s||null==c.return||c.return()}finally{if(a)throw n}}return i.push(Y),i}},{key:"toString",value:function(){var e="棋盘矩阵\n";e+="  ";for(var t=0;t<L.BOARD_SIZE;t++)e+=t%10+" ";e+="\n";for(var r=0;r<L.BOARD_SIZE;r++){e+=r%10+" ";for(var i=0;i<L.BOARD_SIZE;i++)this.boardMatrix[r][i]==u?e+="_ ":this.boardMatrix[r][i]==c?e+="C ":e+="H ";e+="\n"}return e}},{key:"neighborToString",value:function(){var e="2步邻居矩阵\n";e+="  ";for(var t=0;t<L.BOARD_SIZE;t++)e+=t%10+" ";e+="\n";for(var r=0;r<L.BOARD_SIZE;r++){e+=r%10+" ";for(var i=0;i<L.BOARD_SIZE;i++)this.boardMatrix[r][i]===h?e+="H ":this.boardMatrix[r][i]===c?e+="C ":0===this.neighborNum[r][i]?e+="_ ":e+=this.neighborNum[r][i]+" ";e+="\n"}return e}},{key:"closeToString",value:function(e){var t=e===c?this.comCloseNeighbor:this.humCloseNeighbor,r=e===c?"电脑":"人类";r+="近邻矩阵\n",r+="  ";for(var i=0;i<L.BOARD_SIZE;i++)r+=i%10+" ";r+="\n";for(var s=0;s<L.BOARD_SIZE;s++){r+=s%10+" ";for(var a=0;a<L.BOARD_SIZE;a++)this.boardMatrix[s][a]===h?r+="H ":this.boardMatrix[s][a]===c?r+="C ":0===t[s][a]?r+="_ ":r+=t[s][a]+" ";r+="\n"}return r}},{key:"heuristicToString",value:function(e){var t=e===c?"电脑":"人类";t+="空位分值矩阵\n",t+="  ";for(var r=0;r<L.BOARD_SIZE;r++)t+=r%10+" ";t+="\n";for(var i=0;i<L.BOARD_SIZE;i++){t+=i%10+" ";for(var s=0;s<L.BOARD_SIZE;s++)if(this.boardMatrix[i][s]===h)t+="H ";else if(this.boardMatrix[i][s]===c)t+="C ";else{var a=this.heuristic(i,s,e);a>=J.FIVE?t+="5 ":a>=J.ALIVE_FOUR?t+="4!":a>=J.BLOCKED_FOUR?t+="4 ":a>=J.ALIVE_THREE?t+="3!":a>=J.BLOCKED_THREE?t+="3 ":a>=J.ALIVE_TWO?t+="2!":a>=J.BLOCKED_TWO?t+="2 ":t+="_ "}t+="\n"}return t}},{key:"getNumber",value:function(){return this.chessNum}},{key:"getCode",value:function(){return this.zobrist.zobristCode}}],[{key:"outOfBound",value:function(e,t){return e<0||e>=L.BOARD_SIZE||t<0||t>=L.BOARD_SIZE}},{key:"lineCoords",value:function(e,t,r){var i=[];if(r===K.VERTICAL)for(var s=e-4;s<=e+4;s++)i.push(new G(s,t));else if(r==K.HORIZONTAL)for(var a=t-4;a<=t+4;a++)i.push(new G(e,a));else if(r==K.DIAGONAL)for(var n=e-4,o=t-4,u=0;u<=8;u++)i.push(new G(n+u,o+u));else for(var c=e+4,h=t-4,l=0;l<=8;l++)i.push(new G(c-l,h+l));return i}}]),e}(),Oe=0,Ee=1,Te=2,Me=3,ye=function(){function e(){Object(V["a"])(this,e),this.isValid=!1,this.hashCode=0,this.chessNum=0,this.fType=Oe,this.fValue=19,this.treeDepth=0,this.evaValid=!1,this.evaluate=0}return Object(Z["a"])(e,[{key:"validCell",value:function(e,t){return this.isValid&&this.hashCode===e&&this.chessNum===t}}]),e}(),Ie=1<<21,Ne=new Array(Ie);function Ce(e){var t=(e%Ie+Ie)%Ie;return Ne[t]}function De(e,t){var r=(e%Ie+Ie)%Ie;Ne[r]=t}Ne.fill(null,0,Ie);var Re=0,Be=1;function Se(e,t,r,i,s,a,n,o){if(y.nodeNum++,y.goMaxDepth=Math.max(y.goMaxDepth,s),y.posDepth=Math.max(y.posDepth,s),e.isWin(a,n))return y.winNum++,o===c?J.INF:-J.INF;var u=Ce(e.getCode());null===u&&(u=new ye,De(e.getCode(),u));var l=L.MAX_DEPTH-s;if(e.isFull()||s===L.MAX_DEPTH){var f;if(y.leafNum++,L.useTransTable&&u.validCell(e.getCode(),e.getNumber())&&u.evaValid)y.leafMatch++,f=u.evaluate;else{var d=i===Re?h:c;f=e.evaluate(d),u.isValid=!0,u.hashCode=e.getCode(),u.chessNum=e.getNumber(),u.evaValid=!0,u.evaluate=f}return f}if(i===Re){var m=-J.INF;if(L.useTransTable&&u.validCell(e.getCode(),e.getNumber())&&u.fType!=Oe&&u.treeDepth>=l){if(u.fType===Ee)return y.completeMatch++,u.fValue;u.fType===Te&&(y.partialMatch++,m=u.fValue)}for(var v=s>=L.START_KILLER?e.generatorKill(c):e.generator(c),p=!1,_=0,g=0;_<v.length&&g<L.MAX_EMPTY_NUM;_++,g++){var b=v[_].x,A=v[_].y,O=e.backupHeuristic(b,A);e.put(b,A,c);var E=Se(e,t,r,Be,s+1,b,A,c);if(e.undo(b,A,O),m=Math.max(m,E),t=Math.max(t,m),r<=t){y.ABPruning++,p=!0;break}if((new Date).getTime()-y.startTime>L.MAX_TIME){y.isOutTime=!0,p=!0;break}}return L.useTransTable&&(u.validCell(e.getCode(),e.getNumber())&&e.fType!==Oe?l>=u.treeDepth&&(p?(l>u.treeDepth||l===u.treeDepth&&m>u.f)&&(u.f=m,u.fType=Te,u.treeDepth=l):(u.f=m,u.fType=Ee,u.treeDepth=l)):(u.isValid=!0,u.hashCode=e.getCode(),u.chessNum=e.getNumber(),u.treeDepth=l,u.f=m,u.fType=p?Te:Ee)),m}var T=J.INF;if(L.useTransTable&&u.validCell(e.getCode(),e.getNumber())&&u.fType!=Oe&&u.treeDepth>=l){if(u.fType===Ee)return y.completeMatch++,u.fValue;u.fType===Me&&(y.partialMatch++,T=u.fValue)}for(var M=s>=L.START_KILLER?e.generatorKill(h):e.generator(h),I=!1,N=0,C=0;N<M.length&&C<L.MAX_EMPTY_NUM;N++,C++){var D=M[N].x,R=M[N].y,B=e.backupHeuristic(D,R);e.put(D,R,h);var S=Se(e,t,r,Re,s+1,D,R,h);if(e.undo(D,R,B),T=Math.min(T,S),r=Math.min(r,T),r<=t){y.ABPruning++,I=!0;break}if((new Date).getTime()-y.startTime>L.MAX_TIME){y.isOutTime=!0,I=!0;break}}return L.useTransTable&&(u.validCell(e.getCode(),e.getNumber())&&e.fType!==Oe?l>=u.treeDepth&&(I?(l>u.treeDepth||l===u.treeDepth&&T<u.f)&&(u.f=T,u.fType=Me,u.treeDepth=l):(u.f=T,u.fType=Ee,u.treeDepth=l)):(u.isValid=!0,u.hashCode=e.getCode(),u.chessNum=e.getNumber(),u.treeDepth=l,u.f=T,u.fType=I?Me:Ee)),T}function Le(e){xe(),L.useHeuristic?e.getNumber()<4?(L.MAX_DEPTH=4,L.MAX_EMPTY_NUM=20):e.getNumber()<6?(L.MAX_DEPTH=5,L.MAX_EMPTY_NUM=16):e.getNumber()<8?(L.MAX_DEPTH=6,L.MAX_EMPTY_NUM=15):e.getNumber()<10?(L.MAX_DEPTH=7,L.MAX_EMPTY_NUM=15):e.getNumber()<12?(L.MAX_DEPTH=8,L.MAX_EMPTY_NUM=15):(L.MAX_DEPTH=9,L.MAX_EMPTY_NUM=15):(L.MAX_DEPTH=3,L.MAX_EMPTY_NUM=225);for(var t=-J.INF-1,r=-J.INF,i=J.INF,s=-1,a=new G(7,7),n=e.generator(c),o=0,u=0;o<n.length&&u<L.MAX_EMPTY_NUM;o++,u++){var h=n[o].x,l=n[o].y,f=e.backupHeuristic(h,l);y.posDepth=0,e.put(h,l,c);var d=Se(e,r,i,Be,1,h,l,c);if(e.undo(h,l,f),d<=-J.INF&&t<=-J.INF?y.posDepth>s&&(t=d,a.x=h,a.y=l,s=y.posDepth):d>t&&(t=d,a.x=h,a.y=l),r=Math.max(r,t),i<=r)break}return y.f=t,console.log(we(t)),a}function xe(){y.startTime=(new Date).getTime(),y.isOutTime=!1,y.goMaxDepth=0,y.nodeNum=1,y.leafNum=0,y.winNum=0,y.completeMatch=0,y.partialMatch=0,y.leafMatch=0,y.ABPruning=0,y.f=0}function we(){var e="";return e+="最大搜索深度："+y.goMaxDepth+"\n",e+="考察结点个数："+y.nodeNum+" 叶子结点个数："+y.leafNum+" 输赢局面个数："+y.winNum+"\n",e+="置换表命中总次数："+(y.completeMatch+y.partialMatch+y.leafMatch)+" 完全命中："+y.completeMatch+" 部分命中："+y.partialMatch+" 叶子结点命中："+y.leafMatch+"\n",e+="用时："+Math.round(((new Date).getTime()-y.startTime)/1e3)+"秒 超时："+y.isOutTime+"\n",e+="ab剪枝次数："+y.ABPruning+"\n",e+="回传f值："+y.f+"\n",e}var He=Le,ke=new Ae,Ve=0,Ze=1,Fe=2,Pe=3,Ue=Ve,je=!1;function Xe(){Ue=Ve,je=!1,ke.reset()}function Ke(e,t){ke.put(e,t,h),console.log("人类落子 ("+e+", "+t+")"),ke.isWin(e,t)?(je=!0,Ue=Ze):ke.isFull()&&(je=!0,Ue=Pe),console.log(ke.heuristicToString(c)),console.log(ke.heuristicToString(h)),console.log(ke.neighborToString())}function Ge(){var e=He(ke),t=e.x,r=e.y;return ke.put(t,r,c),console.log("电脑落子 ("+t+", "+r+")"),ke.isWin(t,r)?(je=!0,Ue=Fe):ke.isFull()&&(je=!0,Ue=Pe),console.log(ke.heuristicToString(c)),console.log(ke.heuristicToString(h)),console.log(ke.neighborToString()),{x:e.x,y:e.y}}var $e={name:"app",components:{"game-boardObj":v,"info-card":D,"setting-card":k,grid:O},data:function(){return{uiBoard:new Array(225),StatusInfo:"no status info",chessNumber:0,justChess:-1,maskOn:!1,playing:!1,firstChess:c}},methods:{init:function(){for(var e=0;e<225;e++){var t={chess:u,number:-1};this.uiBoard[e]=t,this.$set(this.uiBoard,e,t)}this.chessNumber=0,this.justChess=-1,this.maskOn=!1},handleStart:function(e){var t=this;this.init(),Xe(),this.$refs.board.showMsg("开始"),this.firstChess=e,console.log(this.firstChess),this.playing=!0,this.firstChess===c&&setTimeout((function(){t.handleComputerPlay()}),2601)},handleComputerPlay:function(){var e=Ge(),t=15*e.x+e.y,r={chess:c,number:++this.chessNumber};this.uiBoard[t]=r,this.$set(this.uiBoard,t,r),this.justChess=t,this.maskOn=!1,this.$refs.infoCard.update(),je&&(this.playing=!1,Ue===Fe?this.$refs.board.showMsg("电脑赢了"):Ue===Pe&&this.$refs.board.showMsg("平局"))},handleClick:function(e,t){var r=this,i=15*e+t;if(this.playing&&this.uiBoard[i].chess===u){this.maskOn=!0;var s={chess:h,number:++this.chessNumber};this.uiBoard[i].chess=s,this.$set(this.uiBoard,i,s),this.justChess=i,setTimeout((function(){Ke(e,t),je?(r.playing=!1,r.maskOn=!1,Ue===Ze?r.$refs.board.showMsg("你赢了"):Ue===Pe&&r.$refs.board.showMsg("平局")):r.handleComputerPlay()}),305)}}},created:function(){this.init()}},We=$e,ze=(r("034f"),Object(d["a"])(We,s,a,!1,null,null,null)),Ye=ze.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(Ye)}}).$mount("#app")},"7d32":function(e,t,r){"use strict";var i=r("3df8"),s=r.n(i);s.a},"7d3a":function(e,t,r){"use strict";var i=r("d88a"),s=r.n(i);s.a},"85ec":function(e,t,r){},9851:function(e,t,r){},bd8c:function(e,t,r){"use strict";var i=r("c9e2"),s=r.n(i);s.a},c9e2:function(e,t,r){},d88a:function(e,t,r){}});
//# sourceMappingURL=app.307f346b.js.map